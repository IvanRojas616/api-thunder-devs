{"version":3,"sources":["../src/app.js"],"names":["app","use","express","json","port","set","urlencoded","extended","jwtCheck","secret","jwks","expressJwtSecret","cache","rateLimit","jwksRequestsPerMinute","jwksUri","audience","issuer","algorithms","authStateUser","require","default"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,uBAAZ;AACAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQC,IAAR,EAAR,E,CACA;;AACA,MAAMC,IAAI,GAAG,IAAb;AACAJ,GAAG,CAACK,GAAJ,CAAQ,MAAR,EAAgBD,IAAhB,E,CAEA;;AACAJ,GAAG,CAACC,GAAJ,CAAQ,qBAAO,KAAP,CAAR;AACAD,GAAG,CAACC,GAAJ,CAAQC,iBAAQI,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR,E,CAEA;;AACA,MAAMC,QAAQ,GAAG,yBAAI;AACjBC,EAAAA,MAAM,EAAEC,iBAAKC,gBAAL,CAAsB;AAC1BC,IAAAA,KAAK,EAAE,IADmB;AAE1BC,IAAAA,SAAS,EAAE,IAFe;AAG1BC,IAAAA,qBAAqB,EAAE,CAHG;AAI1B;AACAC,IAAAA,OAAO,EAAE;AALiB,GAAtB,CADS;AAQnB;AACAC,EAAAA,QAAQ,EAAE,2BATS;AAUnB;AACAC,EAAAA,MAAM,EAAE,oCAXW;AAYnBC,EAAAA,UAAU,EAAE,CAAC,OAAD;AAZO,CAAJ,CAAjB,C,CAeA;;AACAlB,GAAG,CAACC,GAAJ,CAAQ,oBAAR,E,CAEA;;AACAD,GAAG,CAACC,GAAJ,CAAQO,QAAR,E,CACA;;AACAR,GAAG,CAACC,GAAJ,CAAQkB,sBAAR,E,CAEA;;AACAnB,GAAG,CAACC,GAAJ,CAAQ,kBAAR,EAA2BmB,OAAO,CAAC,4BAAD,CAAP,CAAsCC,OAAjE;AAEArB,GAAG,CAACC,GAAJ,CAAQ,eAAR,EAAwBmB,OAAO,CAAC,sBAAD,CAAP,CAAgCC,OAAxD;eAEerB,G","sourcesContent":["import express from 'express';\nimport morgan from 'morgan';\nimport cors from 'cors';\nimport jwt from 'express-jwt';\nimport jwks from 'jwks-rsa';\nimport authStateUser from './middlewares/authUserState';\n\nconst app = express();\napp.use(express.json());\n//settings\nconst port = 4304;\napp.set(\"port\", port);\n\n//middlewares\napp.use(morgan('dev'));\napp.use(express.urlencoded({ extended: false }));\n\n//this middleware is very important, because it is the checker of the jwt\nconst jwtCheck = jwt({\n    secret: jwks.expressJwtSecret({\n        cache: true,\n        rateLimit: true,\n        jwksRequestsPerMinute: 5,\n        //In this url are the valid tokesm that audeince have created\n        jwksUri: 'https://dev-w8mlenzq.us.auth0.com/.well-known/jwks.json'\n  }),\n  //audience is the API endpoint that gives Auth0 and return tokens\n  audience: 'https://authtokenthunder/',\n  //This is the url where is used the service of Google, etc\n  issuer: 'https://dev-w8mlenzq.us.auth0.com/',\n  algorithms: ['RS256']\n});\n\n//this is used for rquest info from a server to each other\napp.use(cors());\n\n//this is very important because here check the validation of the token\napp.use(jwtCheck);\n//this middleware must be before the routes, because the routes send info  \napp.use(authStateUser);\n\n//routes\napp.use('/api/v1/products',require('./routes/products/products').default);\n\napp.use('/api/v1/users',require('./routes/users/users').default);\n\nexport default app; "],"file":"app.js"}